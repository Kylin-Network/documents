## 1 安装软件


docker-compose -f docker-compose.yml up

## 2 索引操作

### 2.1 增加索引
PUT service_invoke_tracking
{
  "mappings": {
      "properties": {
        "request_id": { "type": "keyword" },
        "service_name": { "type": "keyword" },
        "source": { "type": "keyword" },
        "city": { "type": "keyword" },
         "url": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
         "request": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "response": {
          "type": "text",
          "fields": {
            "keyword": {
              "type": "keyword",
              "ignore_above": 256
            }
          }
        },
        "invoke_time": {"type": "date",
        "format": "yyyy-MM-dd HH:mm:ss||yyyy-MM-dd||epoch_millis"}
      }
  }
}





### 2.3 添加一些样例数据


POST /service_invoke_tracking/_bulk

{"index":{"_id":1}}
{"request_id":"100","service_name":"eth_price","source":"web","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"beijing"}
{"index":{"_id":2}}
{"request_id":"101","service_name":"eth_price","source":"android","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"shanghai"}
{"index":{"_id":3}}
{"request_id":"100","service_name":"eth_price","source":"ios","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"beijing"}
{"index":{"_id":4}}
{"request_id":"101","service_name":"eth_price","source":"h5","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"shenzhen"}
{"index":{"_id":5}}
{"request_id":"100","service_name":"dot_price","source":"web","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-09 12:12:10","city":"beijing"}
{"index":{"_id":6}}
{"request_id":"101","service_name":"dot_price","source":"android","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"shanghai"}
{"index":{"_id":7}}
{"request_id":"100","service_name":"dot_price","source":"ios","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"beijing"}
{"index":{"_id":8}}
{"request_id":"101","service_name":"btc_price","source":"h5","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-08 12:12:10","city":"shenzhen"}
{"index":{"_id":9}}
{"request_id":"100","service_name":"eth_price","source":"web","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"beijing"}
{"index":{"_id":10}}
{"request_id":"101","service_name":"eth_price","source":"android","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"shanghai"}
{"index":{"_id":11}}
{"request_id":"100","service_name":"eth_price","source":"ios","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-07 12:12:10","city":"beijing"}
{"index":{"_id":12}}
{"request_id":"101","service_name":"eth_price","source":"h5","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"shenzhen"}
{"index":{"_id":13}}
{"request_id":"100","service_name":"dot_price","source":"web","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-03 12:12:10","city":"beijing"}
{"index":{"_id":14}}
{"request_id":"101","service_name":"dot_price","source":"android","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-04 12:12:10","city":"shanghai"}
{"index":{"_id":15}}
{"request_id":"100","service_name":"dot_price","source":"ios","url":"www.kylin.com/service_eth","request":"{date:2021-01-01}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"beijing"}
{"index":{"_id":16}}
{"request_id":"101","service_name":"btc_price","source":"h5","url":"www.kylin.com/service_eth","request":"{date:2021-01-02}","response":"code:200","invoke_time":"2021-02-06 12:12:10","city":"shenzhen"}

